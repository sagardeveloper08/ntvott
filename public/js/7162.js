"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7162],{7162:(t,a,e)=>{e.r(a),e.d(a,{default:()=>i});var s=e(629),o=e(1580);const l={data:function(){return{upload_type_is:!1,disabled_button:!1,upload_data:{id:null,api:{show:!1,progress:0,success_message:null,error_message:null},upload:{show:!1,progress:0,success_message:null,error_message:null,message:null},subtitle:{progress:0,success_message:null,error_message:null}},uploadFormData:new FormData,apiFormData:new FormData,cloud_type:!1}},computed:(0,s.rn)({button_loading:function(t){return t.manga.button_loading},spinner_loading:function(t){return t.manga.spinner_loading},countUploadData:function(t){return t.event.data_count},uploadData:function(t){return t.event.upload_data}}),mounted:function(){var t=this;Echo.channel("progress").listen("EventTrigger",(function(a){a.progress.progress<2&&(t.$store.commit("UPDATE_PROGRESS_DATA",{key:t.countUploadData,id:a.progress.tmdb_id,parameter:"message",object:"upload",value:a.progress.message}),t.$store.commit("UPDATE_UPLOAD_PROGRESS_DATA",{key:t.countUploadData,data:t.uploadData[t.countUploadData]})),t.$store.commit("UPDATE_PROGRESS_DATA",{key:t.countUploadData,id:a.progress.tmdb_id,parameter:"progress",object:"upload",value:a.progress.progress}),t.$store.commit("UPDATE_UPLOAD_PROGRESS_DATA",{key:t.countUploadData,data:t.uploadData[t.countUploadData]})}))},methods:{MOVIEDB_API:function(){var t=this;this.disabled_button=!0,this.$store.commit("COUNT_UPLOAD_PROGRESS"),this.apiFormData.append("cloud_type",this.cloud_type);for(var a=document.querySelector("#chapters"),e=0;e<a.files.length;e++)console.log(a.files[e]),this.apiFormData.append("chapters[]",a.files[e]);this.upload_data.api.show=!0,this.upload_data.id=this.$route.params.id,this.$store.commit("SET_PROGRESS_DATA",this.upload_data),this.$store.commit("SET_UPLOAD_PROGRESS",this.uploadData[this.countUploadData]),this.$store.commit("UPDATE_UPLOAD_PROGRESS_DATA",{key:this.countUploadData,data:this.uploadData[this.countUploadData]}),axios.post("/api/admin/new/manga/chapters/"+this.$route.params.id+"/upload",this.apiFormData).then((function(a){200===a.status&&(t.$store.commit("UPDATE_PROGRESS_DATA",{key:t.countUploadData,parameter:"success_message",object:"api",value:a.data.message}),t.$store.commit("UPDATE_PROGRESS_DATA",{key:t.countUploadData,parameter:"progress",object:"api",value:100}),t.$store.commit("UPDATE_UPLOAD_PROGRESS_DATA",{key:t.countUploadData,data:t.uploadData[t.countUploadData]}))}),(function(a){t.disabled_button=!1,422==a.response.status?(o.logPosition("top right"),o.error(a.response.data.errors),o.error(a.response.data.message)):(t.$store.commit("UPDATE_PROGRESS_DATA",{key:t.countUploadData,parameter:"error_message",object:"api",value:a.response.data.message}),t.$store.commit("UPDATE_UPLOAD_PROGRESS_DATA",{key:t.countUploadData,data:t.uploadData[t.countUploadData]}))}))},infoShow:function(t,a){var e=document.getElementById(t),s="";if("files"in e)for(var o=0;o<e.files.length;o++){s+="<br><strong>"+(o+1)+". file</strong><br>";var l=e.files[o];"name"in l&&(s+="name: "+l.name+"<br>"),"size"in l&&l.size<1048576&&(s+="size:"+(l.size/1024).toFixed(3)+"KB<br>")}document.getElementById(a).innerHTML=s}}};const i=(0,e(1900).Z)(l,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"k1_manage_table"},[e("div",{staticClass:"m-2 p-3",attrs:{id:"manage-panel"}},[e("ul",{staticClass:"nav nav-tabs"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"btn btn-md btn-warning",attrs:{role:"button",to:{name:"chapters-manage",params:{id:this.$route.params.id}}}},[t._v("Manage\n          ")])],1)])]),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-lg-6"},[t._m(0),t._v(" "),e("div",{staticClass:"form-group"},[t._m(1),t._v(" "),e("div",{staticClass:"col-12 cloud-upload"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-sm-6 image",on:{click:function(a){t.cloud_type="local"}}},[e("div",{staticClass:"local-cloud-logo",class:{active:"local"===t.cloud_type}},[e("img",{attrs:{src:"/themes/default/img/local-cloud.svg",alt:"local-cloud",width:"90px"}})])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6 image",on:{click:function(a){t.cloud_type="aws"}}},[e("div",{staticClass:"aws-cloud-logo",class:{active:"aws"===t.cloud_type}},[e("img",{attrs:{src:"/themes/default/img/aws-cloud.svg",alt:"aws-cloud",width:"120px"}})])])])])]),t._v(" "),t.cloud_type?e("div",[e("div",{staticClass:"form-group"},[t._m(2),t._v(" "),e("div",{staticClass:"col-12 col-sm-12"},[e("input",{staticClass:"inputfile",attrs:{type:"file",id:"chapters",name:"chapters",multiple:""},on:{change:function(a){return t.infoShow("chapters","chapterFileDetails")}}}),t._v(" "),t._m(3)])]),t._v(" "),e("div",{staticClass:"col-12 mt-2"},[e("div",{staticClass:"form-group"},[t.disabled_button?t._e():e("button",{staticClass:"btn btn-md btn-warning",on:{click:function(a){return t.MOVIEDB_API()}}},[t._v("\n                  Upload\n                ")]),t._v(" "),t.disabled_button?e("button",{staticClass:"btn btn-md btn-warning",attrs:{disabled:""}},[t._v("\n                  Loading\n                ")]):t._e()])])]):t._e()])])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-group"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"alert alert-info",attrs:{role:"alert"}},[e("strong",[t._v("Important ! ")]),t._v(" "),e("br"),t._v(" "),e("ol",[e("li",[t._v("\n                    Re-name the chapter page image by number (1-20) exm\n                    (1.png) and put all images in zip file rename the zip file\n                    to (chpater name_number) exm: (gold de roger_512.zip), you\n                    can also upload only number of chapter, the chapter number\n                    is required.\n                    "),e("br")]),t._v(" "),e("li",[t._v("You can upload multi zip file")])])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-12"},[e("label",[t._v("Choose Cloud ")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-12 col-sm-4"},[e("label",[t._v("Chapter zip file")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("label",{attrs:{id:"backdropLabel",for:"chapters"}},[t._v("Choose a chapters\n                  "),e("br"),t._v(" "),e("p",{attrs:{id:"chapterFileDetails"}})])}],!1,null,null,null).exports}}]);