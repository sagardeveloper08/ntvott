"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4730],{4730:(t,a,e)=>{e.r(a),e.d(a,{default:()=>i});var s=e(1580);const o={name:"file-manager",data:function(){return{data:[],link:["/"],info_data:null,show_new_folder:!1,folder_name:"",show_rename_folder:!1,rename_folder:"",show_rename_file:!1,rename_file:"",show_upload_progress:!1,percentFileUpload:0,spinner_loading:!1}},mounted:function(){var t=this;this.spinner_loading=!0,axios.post("/api/admin/get/filemanager/folder",{link:"/"}).then((function(a){200===a.status&&(t.data=a.data.data,t.spinner_loading=!1)}))},methods:{GET_INSIDE_FOLDER:function(t,a){var e=this;this.spinner_loading=!0,axios.post("/api/admin/get/filemanager/folder",{link:t}).then((function(t){200===t.status&&(e.data=t.data.data,e.link.push(a),e.spinner_loading=!1)}))},GO_TO_DIR:function(t){var a=this;this.spinner_loading=!0,t!==this.link.slice(-1).pop()&&(this.link.length=this.link.indexOf(t),axios.post("/api/admin/get/filemanager/folder",{link:t}).then((function(e){200===e.status&&(a.data=e.data.data,"/"===t?a.link=["/"]:a.link.push(t),a.spinner_loading=!1)})))},DELETE_FOLDER_A_FILE:function(t,a,e){var o=this;axios.post("/api/admin/delete/filemanager",{path:t,type:e}).then((function(t){200===t.status&&(s.logPosition("top right"),s.success(t.data.message),o.data.files.splice(a,1))}),(function(t){s.logPosition("top right"),s.error("Error in delete")}))},DOWNLOAD_FILE:function(t){axios.post("/api/admin/download/filemanager",{path:t}).then((function(t){200===t.status&&(s.logPosition("top right"),s.success(t.data.message))}),(function(t){s.logPosition("top right"),s.error("Error in delete")}))},GET_FILE_INFO:function(t,a){var e=this;axios.post("/api/admin/get/filemanager/info",{path:t,name:a}).then((function(t){200===t.status&&(e.info_data=[],e.info_data=t.data.data)}),(function(t){s.logPosition("top right"),s.error(t.response.data.message)}))},CREATE_NEW_FOLDER:function(){var t=this,a=this.link.join("")+"/"+this.folder_name;axios.post("/api/admin/create/filemanager/folder",{path:a}).then((function(e){200===e.status&&(s.logPosition("top right"),s.success(e.data.message),null===t.data.folder&&(t.data.folder=[]),t.data.folder.push({path:a,name:a.substring(1)}),t.show_new_folder=!1)}),(function(t){s.logPosition("top right"),s.error(t.response.data.message)}))},DELETE_FOLDER:function(t,a){var e=this;axios.post("/api/admin/delete/filemanager/folder",{path:t}).then((function(t){200===t.status&&(s.logPosition("top right"),s.success(t.data.message),e.data.folder.splice(a,1))}),(function(t){s.logPosition("top right"),s.error(t.response.data.message)}))},RENAME_FOLDER:function(t,a){var e=this,o=this.link.join("")+"/"+this.rename_folder;axios.post("/api/admin/rename/filemanager/any",{old_name:t,new_name:o}).then((function(t){200===t.status&&(s.logPosition("top right"),s.success(t.data.message),e.data.folder[a]=e.rename_folder,e.show_rename_folder=!1)}),(function(t){s.logPosition("top right"),s.error(t.response.data.message)}))},RENAME_FILE:function(t,a){var e=this,o=this.link.join("")+"/"+this.rename_file;axios.post("/api/admin/rename/filemanager/any",{old_name:t,new_name:o}).then((function(t){200===t.status&&(s.logPosition("top right"),s.success(t.data.message),e.data.files[a].name=e.rename_file,e.show_rename_file=!1)}),(function(t){s.logPosition("top right"),s.error(t.response.data.message)}))},UPLOAD_FILES:function(){for(var t=this,a=new FormData,e=document.getElementById("file-upload"),o=0;o<e.files.length;o++)a.append("files[]",e.files[o]);"/"===this.link.join("")?a.append("path","/"):a.append("path",this.link.join("")),this.show_upload_progress=!0;var i={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(a){t.percentFileUpload=Math.round(100*a.loaded/a.total)}};axios.post("/api/admin/upload/filemanager/files",a,i).then((function(a){200===a.status&&(s.logPosition("top right"),s.success(a.data.message),t.show_upload_progress=!1,t.GET_INSIDE_FOLDER(t.link.join("")))}),(function(a){t.show_upload_progress=!1}))}}};const i=(0,e(1900).Z)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.spinner_loading?e("div",{staticClass:"spinner-load"},[e("Loader")],1):t._e(),t._v(" "),t.spinner_loading?t._e():e("div",{staticClass:"k1_manage_table file-manager"},[e("h5",{staticClass:"title p-2"},[t._v("File Manager")]),t._v(" "),e("div",{staticClass:"col-12 row"},[e("div",{staticClass:"col-12 col-md-6"},[e("div",{staticClass:"group-btn"},[e("button",{staticClass:"btn btn-sm btn-warning",attrs:{type:"button"},on:{click:function(a){t.show_new_folder=!0}}},[t._v("Create New Folder")]),t._v(" "),e("div",{staticClass:"upload-file btn btn-sm btn-warning"},[t._v("\r\n                        Upload File\r\n                        "),e("input",{attrs:{type:"file",id:"file-upload",name:"file-upload",multiple:""},on:{change:t.UPLOAD_FILES}})])])]),t._v(" "),t.show_new_folder?e("div",{staticClass:"col-12 col-md-6 m-md-3"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.folder_name,expression:"folder_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Folder Name"},domProps:{value:t.folder_name},on:{input:function(a){a.target.composing||(t.folder_name=a.target.value)}}})]),t._v(" "),e("div",{staticClass:"group-btn"},[e("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"button"},on:{click:t.CREATE_NEW_FOLDER}},[t._v("Submit")]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){t.show_new_folder=!1,t.folder_name=""}}},[t._v("Cancel")])])]):t._e()]),t._v(" "),t.show_upload_progress?e("div",{staticClass:"progress mt-2",staticStyle:{height:"15px"}},[e("div",{staticClass:"progress-bar progress-bar-striped progress-bar-animated",style:{width:t.percentFileUpload+"%"},attrs:{"aria-valuenow":"0","aria-valuemin":t.percentFileUpload,"aria-valuemax":"100"}},[t._v(t._s(t.percentFileUpload)+"%")])]):t._e(),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"GetFileInfoModal",tabindex:"-1",role:"dialog","aria-labelledby":"GetFileInfoLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),null!==t.info_data?e("div",{staticClass:"modal-body"},[null!==t.info_data.m_id&&void 0!==t.info_data.m_id?e("div",{staticClass:"col-12 m-3"},[e("h4",[t._v(t._s(t.info_data.m_name))]),t._v(" "),e("p",[t._v(t._s(t.info_data.m_desc))]),t._v(" "),e("hr"),t._v(" "),e("h6",{staticClass:"mt-3"},[t._v("Images")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-6"},[e("img",{attrs:{src:"/storage/posters/300_"+t.info_data.m_poster,width:"100%"}})]),t._v(" "),e("div",{staticClass:"col-12 col-md-6"},[e("img",{attrs:{src:"/storage/backdrops/300_"+t.info_data.m_backdrop,width:"100%"}})])]),t._v(" "),e("h6",{staticClass:"mt-3"},[t._v("Videos")]),t._v(" "),e("hr"),t._v(" "),e("video",{attrs:{width:"100%",controls:""}},[e("source",{attrs:{src:t.info_data.video_url,type:"video/mp4"}}),t._v(" Your browser does not support the video tag.\r\n              ")])]):t._e(),t._v(" "),null!==t.info_data.t_id&&void 0!==t.info_data.t_id?e("div",{staticClass:"col-12 m-3"},[e("h4",[t._v(t._s(t.info_data.t_name))]),t._v(" "),e("p",[t._v(t._s(t.info_data.t_desc))]),t._v(" "),e("hr"),t._v(" "),e("h6",{staticClass:"mt-3"},[t._v("Images")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-6"},[e("img",{attrs:{src:"/storage/posters/300_"+t.info_data.t_poster,width:"100%"}})]),t._v(" "),e("div",{staticClass:"col-12 col-md-6"},[e("img",{attrs:{src:"/storage/backdrops/300_"+t.info_data.t_backdrop,width:"100%"}})])]),t._v(" "),e("h6",{staticClass:"mt-3"},[t._v("Videos")]),t._v(" "),e("hr"),t._v(" "),e("video",{attrs:{width:"100%",controls:""}},[e("source",{attrs:{src:t.info_data.video_url,type:"video/mp4"}}),t._v(" Your browser does not support the video tag.\r\n              ")])]):t._e(),t._v(" "),null!==t.info_data.id&&void 0!==t.info_data.id?e("div",{staticClass:"col-12 m-3"},[e("h4",[t._v(t._s(t.info_data.name))]),t._v(" "),e("hr"),t._v(" "),e("h6",{staticClass:"mt-3"},[t._v("Images")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-6"},[e("img",{attrs:{src:"/storage/posters/"+t.info_data.image,width:"100%"}})])]),t._v(" "),t.info_data.video_url?e("div",{attrs:{clas:"col-12"}},[e("h6",{staticClass:"mt-3"},[t._v("Videos")]),t._v(" "),e("hr"),t._v(" "),e("video",{attrs:{width:"100%",controls:""}},[e("source",{attrs:{src:t.info_data.video_url,type:"application/x-mpegURL"}}),t._v(" Your browser does not support the video tag.\r\n                ")])]):t._e()]):t._e(),t._v(" "),null!==t.info_data.c_id&&void 0!==t.info_data.c_id?e("div",{staticClass:"col-12 m-3"},[e("h4",[t._v(t._s(t.info_data.c_name))]),t._v(" "),e("hr"),t._v(" "),e("h6",{staticClass:"mt-3"},[t._v("Images")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-6"},[e("img",{attrs:{src:t.info_data.c_image,width:"100%"}})])])]):t._e()]):t._e()])])]),t._v(" "),e("h6",{staticClass:"link-dir p-2"},t._l(t.link,(function(a,s){return e("span",{key:s,on:{click:function(e){return t.GO_TO_DIR(a)}}},[t._v(t._s(a))])})),0),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"col-12"},[e("div",{staticClass:"row"},[t._l(t.data.folder,(function(a,s){return e("div",{key:s,staticClass:"col-4 col-md-2 text-center folder"},[e("i",{staticClass:"fa fa-folder fa-5x",on:{click:function(e){return t.GET_INSIDE_FOLDER(a.path,a.name)}}}),t._v(" "),e("br"),t._v(" "),t.show_rename_folder!==s?e("small",[t._v(t._s(a.name))]):t._e(),t._v(" "),t.show_rename_folder===s?e("input",{directives:[{name:"model",rawName:"v-model",value:t.rename_folder,expression:"rename_folder"}],staticClass:"form-control form-control-sm mt-2",attrs:{type:"text",placeholder:"Folder Name"},domProps:{value:t.rename_folder},on:{input:function(a){a.target.composing||(t.rename_folder=a.target.value)}}}):t._e(),t._v(" "),t.show_rename_folder!==s?e("div",{staticClass:"control"},[e("i",{staticClass:"fa fa-trash",on:{click:function(e){return t.DELETE_FOLDER(a.path,s)}}}),t._v(" "),e("i",{staticClass:"fa fa-edit",on:{click:function(a){t.show_rename_folder=s}}})]):t._e(),t._v(" "),t.show_rename_folder===s?e("div",{staticClass:"group-btn mt-2"},[e("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{type:"button"},on:{click:function(e){return t.RENAME_FOLDER(a.path,s)}}},[t._v("Submit")]),t._v(" "),e("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{type:"button"},on:{click:function(a){t.show_rename_folder=!1,t.rename_folder=""}}},[t._v("Cancel")])]):t._e()])})),t._v(" "),null!==t.data.files?e("div",{staticClass:"col-12 text-center folder"},[e("table",{staticClass:"table table-sm"},[t._m(1),t._v(" "),e("tbody",t._l(t.data.files,(function(a,s){return e("tr",{key:s},[t.show_rename_file!==s&&"jpg"===a.mime||"jpeg"===a.mime||"png"===a.mime?e("td",{on:{click:function(a){t.show_rename_file=s}}},[e("i",{staticClass:"fa fa-image fa-1x"}),t._v("\r\n                                                                    "+t._s(a.name)+"\r\n                                                                ")]):t._e(),t._v(" "),t.show_rename_file!==s&&"mp4"===a.mime||"m3u8"===a.mime?e("td",{on:{click:function(a){t.show_rename_file=s}}},[e("i",{staticClass:"fa fa-video fa-1x"}),t._v("\r\n                                                                    "+t._s(a.name)+"\r\n                                                                ")]):t._e(),t._v(" "),t.show_rename_file===s?e("td",[e("form",{staticClass:"form-inline"},[e("div",{staticClass:"form-group mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rename_file,expression:"rename_file"}],staticClass:"form-control form-control-sm mt-2",attrs:{type:"text",placeholder:"Folder Name"},domProps:{value:t.rename_file},on:{input:function(a){a.target.composing||(t.rename_file=a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group ml-2"},[e("button",{staticClass:"btn btn-sm btn-outline-success",attrs:{type:"button"},on:{click:function(e){return t.RENAME_FILE(a.path,s)}}},[t._v("Submit")])])])]):t._e(),t._v(" "),e("td",[t._v(t._s(a.size/1e3)+" KB")]),t._v(" "),e("td",[t._v(t._s(a.date))]),t._v(" "),e("td",[e("span",{staticClass:"control-btn",on:{click:function(e){return t.DELETE_FOLDER_A_FILE(a.path,s,"file")}}},[t._v("Delete")]),t._v(" "),e("span",{staticClass:"control-btn"},[e("a",{staticStyle:{color:"#03A9F4"},attrs:{href:"/storage/"+a.path}},[t._v("Download")])]),t._v(" "),e("span",{staticClass:"control-btn",attrs:{"data-toggle":"modal","data-target":"#GetFileInfoModal"},on:{click:function(e){return t.GET_FILE_INFO(a.path,a.name)}}},[t._v("Info")])])])})),0)])]):t._e()],2)])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"GetFileInfoLabel"}},[t._v("File Information")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Size")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Date")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Control")])])])}],!1,null,null,null).exports}}]);