"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4932],{4932:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var s=a(629);a(1580);const r={data:function(){return{name:"",external_link:"",genre:"",showProgress:!1,percent_details_progress:0,percentChannelUpload:0,details_progress:!1,video_upload_progress:!1,upload_status:"Upload video",upload_message:"",error_message_api:"",success_message_api:"",presets:[{Name:"HLS - 4000Kilorate - 1080P",Resolution:"1080",Container:"ts"},{Name:"HLS - 2500Kilorate - 720P",Resolution:"720",Container:"ts"},{Name:"HLS - 700Kilorate - 480P",Resolution:"480",Container:"ts"},{Name:"HLS - 400Kilorate - 360P",Resolution:"360",Container:"ts"}],new_presets:"",category:null}},mounted:function(){var e=this;Echo.channel("progress").listen("EventTrigger",(function(t){e.upload_status="FFmpegTranscoding Video",e.percentChannelUpload=t.progress.progress,e.upload_message=t.progress.message}))},computed:(0,s.rn)({categories_list:function(e){return e.categories.data}}),created:function(){this.$store.dispatch("GET_CATEGORIES_BY_SORT","live")},methods:{CHANNEL_DETAILS:function(e){var t=this,a=document.querySelector("#backdrop"),s=new FormData;s.append("name",this.name),s.append("genre",this.genre),s.append("category",this.category),s.append("image",a.files[0]),s.append("iptv_url",this.external_link),this.showProgress=!0,this.details_progress=!0;var r={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){t.percent_details_progress=Math.round(100*e.loaded/e.total)}};this.$validator.validateAll().then((function(e){e&&axios.post("/api/admin/new/channel/details",s,r).then((function(e){200===e.status&&(t.success_message_api=e.data.message,t.showProgress=!1,t.percent_details_progress=100,t.$router.push({name:"tv-manage"}))}),(function(e){t.error_message_api=e.response.data.message,setTimeout((function(){t.showProgress=!1}),4e3)}))}))},infoShow:function(e,t){var a=document.getElementById(e),s="";if("files"in a)for(var r=0;r<a.files.length;r++){s+="<br><strong>"+(r+1)+". file</strong><br>";var i=a.files[r];"name"in i&&(s+="name: "+i.name+"<br>"),"size"in i&&i.size<1048576&&(s+="size:"+(i.size/1024).toFixed(3)+"KB<br>")}document.getElementById(t).innerHTML=s},readImage:function(e,t){var a=(document.getElementById(e).target||window.event.srcElement).files;if(FileReader&&a&&a.length){var s=new FileReader;s.onload=function(){var e=document.getElementById(t);e.style.display="block",e.src=s.result},s.readAsDataURL(a[0])}}}};const i=(0,a(1900).Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"k1_manage_table"},[a("div",{staticClass:"m-2 p-2",attrs:{id:"manage-panel"}},[a("ul",{staticClass:"nav nav-tabs"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"btn btn-md btn-warning",attrs:{role:"button",to:{name:"tv-manage"}}},[e._v("Manage")])],1),e._v(" "),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"btn btn-md btn-warning",attrs:{role:"button",to:{name:"tv-create"}}},[e._v("Create")])],1)])]),e._v(" "),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"form-group"},[e._m(0),e._v(" "),a("div",{staticClass:"col-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Channel name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"form-group"},[e._m(1),e._v(" "),a("div",{staticClass:"col-12"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|image",expression:"'required|image'"}],staticClass:"inputfile",attrs:{type:"file",id:"backdrop",name:"backdrop"},on:{change:function(t){return e.readImage("backdrop","imageFileImage")}}}),e._v(" "),e._m(2),e._v(" "),a("img",{staticStyle:{display:"none"},attrs:{src:"",id:"imageFileImage",width:"200"}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("backdrop"),expression:"errors.has('backdrop')"}],staticClass:" is-danger"},[e._v(e._s(e.errors.first("backdrop")))])])]),e._v(" "),a("div",{staticClass:"form-group"},[e._m(3),e._v(" "),a("div",{staticClass:"col-12"},[a("select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.category,expression:"category"}],staticClass:"form-control",attrs:{name:"category",id:"category"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.category=t.target.multiple?a:a[0]}}},e._l(e.categories_list.categories,(function(t,s){return a("option",{key:s,domProps:{value:t.id}},[e._v("\n                                    "+e._s(t.name)+"\n                                ")])})),0),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("category"),expression:"errors.has('category')"}],staticClass:" is-danger"},[e._v(e._s(e.errors.first("category")))])])]),e._v(" "),a("div",{staticClass:"form-group"},[e._m(4),e._v(" "),a("div",{staticClass:"col-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.external_link,expression:"external_link"}],staticClass:"form-control",attrs:{type:"text",placeholder:"HLS Tv Link"},domProps:{value:e.external_link},on:{input:function(t){t.target.composing||(e.external_link=t.target.value)}}})])])])]),e._v(" "),a("div",{staticClass:"form-group"},[a("div",{staticClass:"col-12"},[a("button",{staticClass:"btn btn-md btn-warning",on:{click:function(t){return e.CHANNEL_DETAILS()}}},[e._v("Upload")])])]),e._v(" "),e.showProgress?a("div",{staticClass:"upload-modal"},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body p-4"},[e.details_progress?a("div",{staticClass:"details_progress"},[a("div",{staticClass:"progress mt-2"},[100!==e.percent_details_progress?a("div",{staticClass:"progress-bar",style:{width:e.percent_details_progress+"%"},attrs:{role:"progressbar","aria-valuenow":e.percent_details_progress,"aria-valuemin":"0","aria-valuemax":"100"}},[e._v(e._s(e.percent_details_progress))]):a("div",[a("i",{attrs:{id:"btn-progress"}}),e._v(" Prepare\n                                    ")])]),e._v(" "),a("p",{staticClass:"is-danger"},[e._v(e._s(e.error_message_api))]),e._v(" "),a("p",{staticClass:"is-success"},[e._v(e._s(e.success_message_api))]),e._v(" "),a("hr")]):e._e()])])])]):e._e()])])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12"},[a("label",[e._v("Name")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12"},[a("label",[e._v("Logo")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{attrs:{id:"backdropLabel",for:"backdrop"}},[e._v("Choose a backdrop\n                                "),a("br")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12"},[a("label",{attrs:{for:"category"}},[e._v("Category")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12"},[a("label",[e._v("M3U8 OR RTMP\n                                "),a("small",{staticClass:"form-text text-muted"},[e._v("External Link")])])])}],!1,null,null,null).exports}}]);